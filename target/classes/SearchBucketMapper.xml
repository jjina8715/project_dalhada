<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="resource.SearchBucketMapper">
<!-- 페이징 시작 -->
	<!-- 제목검색 -->
 	<select id="searchTitle" parameterType="vo.SearchTitleVO"  resultType="vo.SearchTitleVO">
 		select image, title from (select bi.image as image, sb.title as title, rownum rnum from bucketinfo bi, selectedbucket sb 
 		where bi.id = sb.bucket_id and privacy = 'y' and title like '%'||#{searchKeyword}||'%') 
 		where rnum between #{start} and #{last}
 	</select>

	<!-- 검색결과 수 -->
	<select id="totalCnt" parameterType="String" resultType="int">
		select count(*) from bucketinfo bi, selectedbucket sb where bi.id = sb.bucket_id and privacy = 'y' 
		and sb.title like '%'||#{searchKeyword}||'%'
	</select>
<!-- 페이징 끝 -->
	
	
	<!-- 태그검색 -->
	
	<!-- 블로그리뷰 -->
	
	<!-- 동영상 -->
	
	<!-- 좋아요 -->
	
	<!-- 가져오기(db생성 필요) -->
	
	<!-- 회원 가입 -->
	<!-- <insert id="signup">
		insert into tbl_member(userId, userPass, userName)
			values(#{userId}, #{userPass}, #{userName})  
	</insert>

	닉네임 존재여부 체크 
	<select id="checkOverName" parameterType="String" resultType="int">
		select count(*) from tbl_member where userName = #{userName}
	</select>
	
	ID 존재여부 체크 
	<select id="checkOverId" parameterType="String" resultType="int">
		select count(*) from tbl_member where userId = #{userId}
	</select>
	
	회원 로그인 정보 
	<select id="viewMember" resultType="vo.MemberVO">
		select * from tbl_member
			where userId=#{userId}
	</select>

	아이디 찾기 
	<select id="find_id" parameterType="String" resultType="String">
		select userId from tbl_member where userName = #{userName}
	</select>
	
	비밀번호 찾기
	<select id="find_pw" parameterType="vo.MemberVO" resultType="String">
		select userPass from tbl_member 
			where userName = #{userName} and userId = #{userId}
	</select>
	
	비밀번호 임시 비밀번호 저장
	<update id="tmp_pw" parameterType="vo.MemberVO">
		update tbl_member set
			userPass=#{userPass}
		where userName = #{userName} and userId=#{userId}
	</update>
	
	회원 탈퇴
	<delete id="withdrawal">
		delete from tbl_member where userId = #{userId}
	</delete>
	
	회원정보 수정
	<update id="updateMember" parameterType="vo.MemberVO">
		update tbl_member set 
			userName=#{userName}, userPass=#{userPass} 
		where userId=#{userId}
	</update> -->
</mapper>